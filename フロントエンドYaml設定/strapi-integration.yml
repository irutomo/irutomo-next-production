# ===================================
# Strapi v5 Japan Info Article
# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é€£æºè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
# ===================================

api:
  # åŸºæœ¬è¨­å®š
  base:
    url: "http://localhost:1337"
    version: "v5"
    timeout: 10000
    retries: 3

  # ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¨­å®š
  endpoints:
    japan_info:
      collection: "/api/japan-info-articles"
      single: "/api/japan-info-articles/{id}"
      draft: "/api/japan-info-articles/{id}?status=draft"
      popular: "/api/japan-info-articles?filters[isPopular][$eq]=true"
      
  # ãƒ­ã‚±ãƒ¼ãƒ«è¨­å®š
  locales:
    default: "ja"
    supported: ["ja", "ko", "en"]
    fallback: "ja"

# ===================================
# ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ§‹é€ å®šç¾©
# ===================================

content_type:
  name: "japan-info-article"
  display_name: "æ—¥æœ¬æƒ…å ±è¨˜äº‹"
  
  # ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å®šç¾©
  fields:
    # åŸºæœ¬ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
    id:
      type: "number"
      required: true
      description: "è¨˜äº‹ID"
      
    documentId:
      type: "string"
      required: true
      description: "ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨˜äº‹è­˜åˆ¥å­"
      
    title:
      type: "string"
      required: true
      max_length: 255
      min_length: 3
      description: "è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆæ—¥æœ¬èªï¼‰"
      validation:
        - not_empty
        - min_length_3
        
    koreanTitle:
      type: "string"
      required: false
      max_length: 255
      description: "è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆéŸ“å›½èªï¼‰"
      
    description:
      type: "text"
      required: true
      description: "è¨˜äº‹æ¦‚è¦ï¼ˆæ—¥æœ¬èªï¼‰"
      validation:
        - not_empty
        
    koreanDescription:
      type: "text"
      required: false
      description: "è¨˜äº‹æ¦‚è¦ï¼ˆéŸ“å›½èªï¼‰"
      
    content:
      type: "richtext"
      required: true
      description: "è¨˜äº‹æœ¬æ–‡ï¼ˆæ—¥æœ¬èªï¼‰"
      sanitize: true
      
    koreanContent:
      type: "richtext"
      required: false
      description: "è¨˜äº‹æœ¬æ–‡ï¼ˆéŸ“å›½èªï¼‰"
      sanitize: true
      
    # ãƒ¡ãƒ‡ã‚£ã‚¢ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
    imageUrl:
      type: "string"
      required: true
      format: "url"
      description: "ãƒ¡ã‚¤ãƒ³ç”»åƒURL"
      validation:
        - url_format
        - image_extension
        
    images:
      type: "array"
      items_type: "string"
      description: "è¿½åŠ ç”»åƒURLs"
      validation:
        - url_array
        
    # ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
    tags:
      type: "array"
      items_type: "string"
      description: "è¨˜äº‹ã‚¿ã‚°"
      max_items: 10
      
    location:
      type: "string"
      required: false
      max_length: 100
      description: "é–¢é€£å ´æ‰€ãƒ»åœ°åŸŸ"
      
    slug:
      type: "string"
      required: true
      format: "slug"
      description: "URLç”¨ã‚¹ãƒ©ãƒƒã‚°"
      validation:
        - slug_format
        - unique
        
    # ãƒ•ãƒ©ã‚°ãƒ»çµ±è¨ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
    isPopular:
      type: "boolean"
      default: false
      description: "äººæ°—è¨˜äº‹ãƒ•ãƒ©ã‚°"
      
    views:
      type: "integer"
      default: 0
      min: 0
      description: "é–²è¦§æ•°"
      
    author:
      type: "string"
      required: false
      max_length: 50
      description: "è‘—è€…å"
      
    # åŸ‹ã‚è¾¼ã¿ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
    embedLinks:
      type: "array"
      items_type: "object"
      description: "åŸ‹ã‚è¾¼ã¿ãƒªãƒ³ã‚¯æƒ…å ±"
      schema:
        type:
          type: "string"
          enum: ["video", "map", "iframe", "social"]
        url:
          type: "string"
          format: "url"
        title:
          type: "string"
          required: false
          
    # ã‚·ã‚¹ãƒ†ãƒ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
    locale:
      type: "string"
      default: "ja"
      enum: ["ja", "ko", "en"]
      description: "ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ­ã‚±ãƒ¼ãƒ«"
      
    publishedAt:
      type: "datetime"
      description: "å…¬é–‹æ—¥æ™‚"
      
    createdAt:
      type: "datetime"
      description: "ä½œæˆæ—¥æ™‚"
      
    updatedAt:
      type: "datetime"
      description: "æ›´æ–°æ—¥æ™‚"

# ===================================
# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è¡¨ç¤ºè¨­å®š
# ===================================

frontend:
  # ãƒªã‚¹ãƒˆè¡¨ç¤ºè¨­å®š
  list_view:
    page_size: 12
    sort_by: "publishedAt"
    sort_order: "desc"
    display_fields:
      - "title"
      - "description"
      - "imageUrl"
      - "tags"
      - "publishedAt"
      - "views"
      - "isPopular"
    
    # ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼è¨­å®š
    filters:
      popular:
        field: "isPopular"
        operator: "eq"
        value: true
        label: "äººæ°—è¨˜äº‹"
        
      location:
        field: "location"
        operator: "contains"
        label: "å ´æ‰€ã§çµã‚Šè¾¼ã¿"
        
      tags:
        field: "tags"
        operator: "in"
        label: "ã‚¿ã‚°ã§çµã‚Šè¾¼ã¿"
        
    # æ¤œç´¢è¨­å®š
    search:
      fields: ["title", "description", "content", "tags"]
      placeholder: "è¨˜äº‹ã‚’æ¤œç´¢..."
      min_length: 2

  # è©³ç´°è¡¨ç¤ºè¨­å®š
  detail_view:
    display_fields:
      - "title"
      - "description"
      - "content"
      - "imageUrl"
      - "images"
      - "tags"
      - "location"
      - "author"
      - "publishedAt"
      - "embedLinks"
    
    # SEOè¨­å®š
    seo:
      title_field: "title"
      description_field: "description"
      image_field: "imageUrl"
      canonical_base: "https://irutomo.com/japan-info"
      
    # é–¢é€£è¨˜äº‹è¨­å®š
    related_articles:
      enabled: true
      limit: 3
      match_by: ["tags", "location"]

  # ã‚«ãƒ¼ãƒ‰è¡¨ç¤ºè¨­å®š
  card_view:
    image:
      field: "imageUrl"
      aspect_ratio: "16:9"
      lazy_load: true
      fallback: "/assets/no-image.jpg"
      
    title:
      field: "title"
      max_length: 60
      
    description:
      field: "description"
      max_length: 120
      
    metadata:
      - field: "publishedAt"
        format: "YYYYå¹´MMæœˆDDæ—¥"
      - field: "views"
        suffix: "å›é–²è¦§"
      - field: "location"
        prefix: "ğŸ“"

# ===================================
# å¤šè¨€èªå¯¾å¿œè¨­å®š
# ===================================

i18n:
  # æ—¥æœ¬èªè¡¨ç¤º
  ja:
    labels:
      title: "ã‚¿ã‚¤ãƒˆãƒ«"
      description: "æ¦‚è¦"
      content: "æœ¬æ–‡"
      published_at: "å…¬é–‹æ—¥"
      views: "é–²è¦§æ•°"
      author: "è‘—è€…"
      tags: "ã‚¿ã‚°"
      location: "å ´æ‰€"
      popular: "äººæ°—è¨˜äº‹"
      read_more: "ç¶šãã‚’èª­ã‚€"
      share: "ã‚·ã‚§ã‚¢"
      related: "é–¢é€£è¨˜äº‹"
      
    messages:
      no_articles: "è¨˜äº‹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ"
      loading: "èª­ã¿è¾¼ã¿ä¸­..."
      error: "ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ"

  # éŸ“å›½èªè¡¨ç¤º
  ko:
    field_mapping:
      title: "koreanTitle"
      description: "koreanDescription"
      content: "koreanContent"
      
    labels:
      title: "ì œëª©"
      description: "ì„¤ëª…"
      content: "ë‚´ìš©"
      published_at: "ê²Œì‹œì¼"
      views: "ì¡°íšŒìˆ˜"
      author: "ì‘ì„±ì"
      tags: "íƒœê·¸"
      location: "ìœ„ì¹˜"
      popular: "ì¸ê¸° ê¸°ì‚¬"
      read_more: "ë” ë³´ê¸°"
      share: "ê³µìœ "
      related: "ê´€ë ¨ ê¸°ì‚¬"
      
    messages:
      no_articles: "ê¸°ì‚¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"
      loading: "ë¡œë”© ì¤‘..."
      error: "ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"

# ===================================
# API ã‚¯ã‚¨ãƒªè¨­å®š
# ===================================

queries:
  # è¨˜äº‹ä¸€è¦§å–å¾—
  get_articles:
    endpoint: "/api/japan-info-articles"
    method: "GET"
    default_params:
      populate: "*"
      sort: "publishedAt:desc"
      pagination:
        page: 1
        pageSize: 12
      locale: "ja"
      
  # äººæ°—è¨˜äº‹å–å¾—
  get_popular_articles:
    endpoint: "/api/japan-info-articles"
    method: "GET"
    default_params:
      populate: "*"
      filters:
        isPopular:
          $eq: true
      sort: "views:desc"
      pagination:
        pageSize: 6
      locale: "ja"
      
  # è¨˜äº‹è©³ç´°å–å¾—
  get_article_detail:
    endpoint: "/api/japan-info-articles/{documentId}"
    method: "GET"
    default_params:
      populate: "*"
      locale: "ja"
      
  # é–¢é€£è¨˜äº‹å–å¾—
  get_related_articles:
    endpoint: "/api/japan-info-articles"
    method: "GET"
    default_params:
      populate: "title,description,imageUrl,publishedAt"
      pagination:
        pageSize: 3
      locale: "ja"
      filters:
        documentId:
          $ne: "{current_article_id}"

# ===================================
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥è¨­å®š
# ===================================

cache:
  # è¨˜äº‹ä¸€è¦§
  articles_list:
    ttl: 300  # 5åˆ†
    key_pattern: "articles:list:{locale}:{page}:{filters_hash}"
    
  # è¨˜äº‹è©³ç´°
  article_detail:
    ttl: 600  # 10åˆ†
    key_pattern: "article:detail:{documentId}:{locale}"
    
  # äººæ°—è¨˜äº‹
  popular_articles:
    ttl: 900  # 15åˆ†
    key_pattern: "articles:popular:{locale}"

# ===================================
# ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨­å®š
# ===================================

performance:
  # ç”»åƒæœ€é©åŒ–
  images:
    lazy_load: true
    responsive: true
    formats: ["webp", "jpg"]
    sizes:
      thumbnail: "300x200"
      medium: "600x400"
      large: "1200x800"
      
  # ãƒ—ãƒªãƒ­ãƒ¼ãƒ‰è¨­å®š
  preload:
    critical_resources:
      - "imageUrl"
    prefetch_related: true
    
  # ãƒãƒ³ãƒ‰ãƒ«æœ€é©åŒ–
  bundle:
    code_splitting: true
    tree_shaking: true
    compression: "gzip"

# ===================================
# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š
# ===================================

security:
  # ã‚µãƒ‹ã‚¿ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³
  sanitize:
    html_fields: ["content", "koreanContent"]
    allowed_tags: ["p", "h1", "h2", "h3", "h4", "h5", "h6", "strong", "em", "ul", "ol", "li", "a", "img", "br"]
    allowed_attributes:
      a: ["href", "title"]
      img: ["src", "alt", "title"]
      
  # CSPè¨­å®š
  content_security_policy:
    img_src: ["'self'", "data:", "https:"]
    media_src: ["'self'", "https:"]
    
  # ãƒ¬ãƒ¼ãƒˆåˆ¶é™
  rate_limiting:
    requests_per_minute: 100
    burst_limit: 20 